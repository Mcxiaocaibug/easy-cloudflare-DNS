# 🛠️ 六趣DNS 管理员手册

<div align="center">
  <img src="https://img.shields.io/badge/🛠️-管理员手册-blue?style=for-the-badge" alt="管理员手册">
  <img src="https://img.shields.io/badge/⚙️-系统管理-green?style=for-the-badge" alt="系统管理">
</div>

---

## 📋 目录

- [管理员权限](#管理员权限)
- [用户管理](#用户管理)
- [域名管理](#域名管理)
- [系统配置](#系统配置)
- [数据统计](#数据统计)
- [安全设置](#安全设置)
- [故障排除](#故障排除)

---

## 🔐 管理员权限

### 权限说明

| 权限模块 | 功能描述 | 操作范围 |
|---------|---------|---------|
| **用户管理** | 用户账户管理 | 查看、编辑、删除用户 |
| **域名管理** | 域名和DNS记录管理 | 添加、删除、管理域名 |
| **系统设置** | 系统参数配置 | 基本设置、邮件配置 |
| **日志查看** | 操作审计日志 | 查看所有操作记录 |
| **数据统计** | 使用情况统计 | 用户、域名、记录统计 |
| **安全设置** | 安全参数配置 | 权限、验证、防护 |

### 登录管理后台

1. **访问管理后台**
   - 访问 `/admin/` 目录
   - 使用管理员账户登录
   - 验证管理员权限

2. **管理员账户**
   - 安装时创建的管理员账户
   - 具有最高权限
   - 可创建其他管理员

---

## 👥 用户管理

### 用户列表

#### 查看用户信息

1. **用户列表**
   - 显示所有注册用户
   - 用户基本信息
   - 账户状态

2. **用户信息**
   ```
   用户名：用户登录名
   邮箱：注册邮箱地址
   积分：当前积分余额
   用户组：默认组/VIP组/SVIP组
   注册时间：账户创建时间
   最后活动：最近登录时间
   状态：正常/禁用
   ```

#### 用户操作

1. **编辑用户信息**
   - 修改用户邮箱
   - 调整积分余额
   - 修改用户组
   - 启用/禁用账户

2. **用户组管理**
   - 分配用户组
   - 设置组权限
   - 批量操作

3. **积分管理**
   - 手动充值积分
   - 调整积分余额
   - 查看积分记录

### 用户组管理

#### 用户组配置

| 用户组 | 权限说明 | 积分消耗 | 域名访问 | 记录限制 |
|--------|---------|---------|---------|---------|
| **默认组** | 基础权限 | 标准消耗 | 有限域名 | 100条 |
| **VIP组** | 更多权限 | 积分优惠 | 更多域名 | 500条 |
| **SVIP组** | 最高权限 | 部分免费 | 所有域名 | 无限制 |

#### 组权限设置

1. **域名访问权限**
   - 设置可访问的域名
   - 按用户组分配权限
   - 支持批量设置

2. **积分消耗规则**
   - 设置不同组的积分消耗
   - VIP组享受优惠
   - SVIP组部分免费

3. **记录数量限制**
   - 设置最大记录数
   - 防止资源滥用
   - 支持无限制设置

### 用户统计

#### 用户数据统计

1. **用户数量统计**
   - 总用户数
   - 活跃用户数
   - 新增用户数
   - 用户增长趋势

2. **用户行为分析**
   - 登录频率
   - 操作次数
   - 积分使用情况
   - 功能使用统计

---

## 🌐 域名管理

### 域名列表

#### 查看域名信息

1. **域名列表**
   - 显示所有添加的域名
   - 域名基本信息
   - 状态和权限

2. **域名信息**
   ```
   域名：完整域名
   DNS提供商：Cloudflare/彩虹DNS等
   状态：正常/暂停/错误
   用户组权限：可访问的用户组
   记录数量：当前DNS记录数
   添加时间：域名添加时间
   ```

#### 域名操作

1. **添加域名**
   - 通过DNS提供商API添加
   - 手动添加域名
   - 批量导入域名

2. **域名配置**
   - 设置域名状态
   - 配置用户组权限
   - 设置记录限制

3. **域名监控**
   - 检查域名状态
   - 监控DNS记录
   - 性能分析

### DNS提供商管理

#### Cloudflare管理

1. **添加Cloudflare账户**
   - 获取API Token
   - 配置账户信息
   - 测试连接

2. **导入域名**
   - 从Cloudflare账户导入域名
   - 自动获取域名列表
   - 设置域名权限

3. **账户管理**
   - 查看账户状态
   - 更新API Token
   - 删除账户

#### 彩虹DNS管理

1. **添加彩虹DNS账户**
   - 获取API密钥
   - 配置服务器信息
   - 验证连接

2. **域名同步**
   - 同步域名列表
   - 更新域名状态
   - 处理同步错误

### DNS记录管理

#### 记录列表

1. **查看所有记录**
   - 显示所有DNS记录
   - 记录详细信息
   - 用户和域名信息

2. **记录操作**
   - 编辑记录内容
   - 删除记录
   - 暂停/恢复记录

#### 记录统计

1. **记录类型统计**
   - 各类型记录数量
   - 记录分布情况
   - 使用趋势分析

2. **用户使用统计**
   - 用户记录数量
   - 热门域名排行
   - 使用频率分析

---

## ⚙️ 系统配置

### 基本设置

#### 站点信息

1. **站点配置**
   ```
   站点名称：六趣DNS管理系统
   站点描述：功能强大的DNS管理系统
   联系邮箱：admin@example.com
   客服QQ：123456789
   ```

2. **系统参数**
   - 默认积分设置
   - 邀请奖励设置
   - 注册开关
   - 维护模式

#### 用户设置

1. **注册设置**
   - 开放/关闭注册
   - 注册验证要求
   - 默认用户组
   - 初始积分设置

2. **积分设置**
   - 积分获取规则
   - 积分消耗规则
   - 用户组差异
   - 充值设置

### 邮件配置

#### SMTP设置

1. **邮件服务器配置**
   ```
   服务器：smtp.qq.com
   端口：465
   加密：SSL
   用户名：your-email@qq.com
   密码：授权码
   发件人：六趣DNS系统
   ```

2. **邮件模板管理**
   - 注册验证邮件
   - 密码重置邮件
   - 系统通知邮件
   - 自定义模板

#### 邮件测试

1. **发送测试邮件**
   - 测试SMTP配置
   - 验证邮件发送
   - 检查邮件格式

2. **邮件日志**
   - 查看发送记录
   - 分析发送状态
   - 处理发送失败

### 安全设置

#### 访问控制

1. **IP白名单**
   - 限制管理员IP
   - 防止未授权访问
   - 支持IP段设置

2. **登录保护**
   - 登录失败锁定
   - 验证码保护
   - 强密码要求

#### 数据安全

1. **数据库安全**
   - 定期备份
   - 访问权限控制
   - 加密存储

2. **文件安全**
   - 敏感文件保护
   - 上传文件检查
   - 目录权限设置

---

## 📊 数据统计

### 用户统计

#### 用户数据分析

1. **用户数量统计**
   ```
   总用户数：1,234
   活跃用户：856
   新增用户（本月）：156
   用户增长率：12.5%
   ```

2. **用户分布**
   - 按用户组分布
   - 按注册时间分布
   - 按地区分布
   - 按积分分布

#### 用户行为分析

1. **登录统计**
   - 日活跃用户
   - 登录频率
   - 在线时长
   - 访问页面

2. **操作统计**
   - 操作次数
   - 功能使用率
   - 积分使用情况
   - 错误操作

### 域名统计

#### 域名数据分析

1. **域名数量统计**
   ```
   总域名数：89
   活跃域名：67
   新增域名（本月）：12
   域名增长率：15.5%
   ```

2. **域名分布**
   - 按DNS提供商分布
   - 按用户组分布
   - 按状态分布
   - 按记录数量分布

#### DNS记录统计

1. **记录类型统计**
   ```
   A记录：456条
   AAAA记录：123条
   CNAME记录：234条
   TXT记录：89条
   MX记录：45条
   ```

2. **记录使用分析**
   - 热门记录类型
   - 记录使用趋势
   - 用户使用习惯
   - 性能影响分析

### 系统统计

#### 系统性能

1. **性能指标**
   ```
   平均响应时间：120ms
   数据库查询时间：15ms
   内存使用率：65%
   CPU使用率：45%
   ```

2. **资源使用**
   - 服务器资源使用
   - 数据库大小
   - 日志文件大小
   - 存储空间使用

#### 错误统计

1. **错误分析**
   - 错误类型分布
   - 错误频率统计
   - 错误影响分析
   - 解决方案统计

2. **日志分析**
   - 访问日志分析
   - 错误日志分析
   - 性能日志分析
   - 安全日志分析

---

## 🔒 安全设置

### 权限管理

#### 管理员权限

1. **权限分级**
   - 超级管理员：所有权限
   - 普通管理员：部分权限
   - 操作员：基础权限

2. **权限控制**
   - 功能权限控制
   - 数据权限控制
   - 操作权限控制
   - 时间权限控制

#### 用户权限

1. **用户组权限**
   - 域名访问权限
   - 功能使用权限
   - 积分消耗权限
   - 记录数量权限

2. **权限验证**
   - 实时权限检查
   - 权限变更通知
   - 权限使用记录
   - 权限异常监控

### 安全防护

#### 访问控制

1. **IP限制**
   - 管理员IP白名单
   - 用户IP限制
   - 异常IP监控
   - 自动封禁机制

2. **登录保护**
   - 登录失败锁定
   - 验证码保护
   - 强密码要求
   - 会话管理

#### 数据保护

1. **数据加密**
   - 密码加密存储
   - 敏感数据加密
   - 传输数据加密
   - 备份数据加密

2. **数据备份**
   - 自动备份机制
   - 增量备份
   - 异地备份
   - 备份恢复

### 安全监控

#### 实时监控

1. **访问监控**
   - 实时访问统计
   - 异常访问检测
   - 攻击行为识别
   - 自动防护

2. **操作监控**
   - 操作日志记录
   - 敏感操作监控
   - 异常操作检测
   - 操作审计

#### 安全报告

1. **安全统计**
   - 安全事件统计
   - 攻击类型分析
   - 防护效果评估
   - 安全趋势分析

2. **安全建议**
   - 安全配置建议
   - 漏洞修复建议
   - 安全加固建议
   - 最佳实践建议

---

## 🐛 故障排除

### 常见问题

#### 系统问题

**Q: 系统无法访问？**
```
A: 检查项目：
1. Web服务器是否正常运行
2. PHP是否正常工作
3. 数据库连接是否正常
4. 文件权限是否正确
5. 防火墙是否阻止访问
```

**Q: 数据库连接失败？**
```
A: 解决方案：
1. 检查数据库文件是否存在
2. 确认SQLite3扩展已安装
3. 检查文件权限
4. 查看PHP错误日志
5. 检查磁盘空间
```

#### 功能问题

**Q: 邮件发送失败？**
```
A: 检查项目：
1. SMTP配置是否正确
2. 邮箱认证信息
3. 网络连接是否正常
4. 邮件服务商限制
5. 防火墙设置
```

**Q: DNS记录不生效？**
```
A: 可能原因：
1. DNS提供商API问题
2. 记录格式错误
3. 权限不足
4. 网络问题
5. DNS传播延迟
```

### 日志分析

#### 系统日志

1. **日志位置**
   ```
   data/logs/system.log - 系统运行日志
   data/logs/error.log - 错误日志
   data/logs/access.log - 访问日志
   data/logs/security.log - 安全日志
   ```

2. **日志分析**
   ```bash
   # 查看最新错误
   tail -f data/logs/error.log
   
   # 搜索特定错误
   grep "SMTP" data/logs/system.log
   
   # 统计错误数量
   grep -c "ERROR" data/logs/system.log
   ```

#### 性能监控

1. **系统资源监控**
   ```bash
   # CPU和内存使用
   htop
   
   # 磁盘使用情况
   df -h
   
   # 网络连接
   netstat -an | grep :80
   ```

2. **应用性能监控**
   ```bash
   # 数据库大小
   ls -lh data/cloudflare_dns.db
   
   # 用户数量
   sqlite3 data/cloudflare_dns.db "SELECT COUNT(*) FROM users;"
   
   # DNS记录数量
   sqlite3 data/cloudflare_dns.db "SELECT COUNT(*) FROM dns_records;"
   ```

### 备份恢复

#### 数据备份

1. **自动备份脚本**
   ```bash
   #!/bin/bash
   DATE=$(date +%Y%m%d_%H%M%S)
   BACKUP_DIR="/path/to/backup"
   
   # 备份数据库
   cp data/cloudflare_dns.db $BACKUP_DIR/cloudflare_dns_$DATE.db
   
   # 备份配置文件
   tar -czf $BACKUP_DIR/config_$DATE.tar.gz config/
   
   # 清理旧备份
   find $BACKUP_DIR -name "*.db" -mtime +7 -delete
   ```

2. **定时备份**
   ```bash
   # 添加到crontab
   crontab -e
   
   # 每天凌晨2点备份
   0 2 * * * /path/to/backup.sh
   ```

#### 数据恢复

1. **数据库恢复**
   ```bash
   # 停止服务
   sudo systemctl stop nginx php8.0-fpm
   
   # 恢复数据库
   cp backup/cloudflare_dns_20240101.db data/cloudflare_dns.db
   
   # 设置权限
   chmod 666 data/cloudflare_dns.db
   
   # 启动服务
   sudo systemctl start nginx php8.0-fpm
   ```

2. **完整恢复**
   ```bash
   # 恢复所有文件
   tar -xzf backup_20240101.tar.gz
   
   # 设置权限
   chmod -R 755 .
   chmod 666 data/cloudflare_dns.db
   ```

---

## 📞 技术支持

### 获取帮助

| 帮助方式 | 响应时间 | 适用场景 |
|---------|---------|---------|
| **📖 管理员手册** | 即时 | 基础管理问题 |
| **💬 QQ群交流** | 1-2小时 | 技术讨论和问题 |
| **🐛 Issue报告** | 1-3天 | Bug报告和功能请求 |
| **📧 邮件支持** | 1-2天 | 详细问题描述 |

### 联系方式

- **QQ交流群**：[六趣M技术群](https://qm.qq.com/q/qYN7MywxO0) (群号: 1044379774)
- **在线演示**：[dns.6qu.cc](https://dns.6qu.cc/)
- **GitHub仓库**：[cloudflare-DNS](https://github.com/976853694/cloudflare-DNS)

### 最佳实践

1. **定期备份**
   - 每日自动备份数据库
   - 每周完整备份系统
   - 异地存储重要数据

2. **安全维护**
   - 定期更新系统
   - 监控安全日志
   - 及时修复漏洞

3. **性能优化**
   - 监控系统性能
   - 优化数据库查询
   - 清理无用数据

---

<div align="center">
  <p><strong>🛠️ 六趣DNS 管理员手册</strong></p>
  <p>如有问题，请查看本手册或联系技术支持</p>
  <p>Made with ❤️ by 六趣M</p>
</div>
